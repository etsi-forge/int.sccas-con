/*
Copyright (c) ETSI 2019-2022.

This software is subject to copyrights owned by ETSI. Non-exclusive permission
is hereby granted, free of charge, to copy, reproduce and amend this file
under the following conditions: It is provided "as is", without warranty of any
kind, expressed or implied.

ETSI shall never be liable for any claim, damages, or other liability arising
from its use or inability of use.This permission does not apply to any documentation
associated with this file for which ETSI keeps all rights reserved. The present
copyright notice shall be included in all copies of whole or part of this
file and shall not imply any sub-license right.
*/

/* interface ISC at SCCAS */
Package TP_SCCAS_Chapter_6_3 {
    
    import all from Sip_Common;
    
    Group "6.3.1 General" {
    	
    	import all from Sip_Common;
    	 
    	Test Purpose {
        
        TP Id TP_ISC_SCCAS_RSC_REG_01
        
        Test objective  "Verify that the SCCAS successfully obtain/processes 3pty registration information."
        
        Reference 
            "ETSI TS 124 237 [1], Clause 6.3.1"
        
        Config Id CFG_SCCAS_01
        
        PICS Selection NONE
        
        Initial conditions with {
            the UE entity isNotRegisteredTo the IMS_A
        }
        
        Expected behaviour
            ensure that {
                when {
                    the IUT entity receives a REGISTER containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        SipMessageBody containing
                            MIME indicating value "REGISTER from_UE_A",
                            MIME indicating value "r_200_Ok to_UE_A";;
                    from the IMS_S_CSCF entity
                }
                then {
                    the IUT entity sends a r_200_Ok containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact indicating value PX_UE_A_SIP_URI //,
                        //Path indicating value PX_P_CSCF_A_SIP_URI,
                        //PChargingVector containing
                        //    icid indicating value PX_TO_BE_DEFINED,
                        //PVisitedNetworkID indicating value PX_TO_BE_DEFINED,
                        //Require indicating value "path",
                        //Supported indicating value "path"   ;;
                        ;
                    to the IMS_S_CSCF entity
                }
            }
    } // End of TP_ISC_SCCAS_RSC_REG_01
    
    Test Purpose {
        
        TP Id TP_ISC_SCCAS_RSC_REG_02
        
        Test objective  "Verify that the SCCAS successfully obtain/processes de-registration information (Expires=0)."
        
        Reference 
            "ETSI TS 124 237 [1], Clause 6.3.1"
        
        Config Id CFG_SCCAS_01
        
        PICS Selection NONE
        
        Initial conditions with {
            the UE entity isRegisteredTo the IMS_A
        }
        
        Expected behaviour
            ensure that {
                when {
                    the IUT entity receives a REGISTER containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Expires indicating value 0;
                    from the IMS_S_CSCF entity
                }
                then {
                    the IUT entity sends a r_200_Ok containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA ;
                    to the IMS_S_CSCF entity
                }
            }
    } // End of TP_ISC_SCCAS_RSC_REG_02
    	
    } //End Group "6.3.1 General" 
    
    
    Group "6.3.2 Triggers for the SCCAS providing information to ATCF"{
    	
    	import all from Sip_Common;
    	
    	Test Purpose {  
        
        TP Id TP_ISC_SCCAS_RSC_REG_03
        
        Test objective  "Verify that the SCCAS successfully obtain/processes SRVCC information."
        
        Reference 
            "ETSI TS 124 237 [1], Clause 6.3.2 (1st numbered list)"
        
        Config Id CFG_SCCAS_01
        
        PICS Selection NONE
        
        Initial conditions with {
            the UE entity isNotRegisteredTo the IMS_A
        }
        
        Expected behaviour
            ensure that {
                when {
                    the IUT entity receives a REGISTER containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        FeatureCaps containing 
                            g3gppAtcfFeatureCapabilityIndicator;,
                        SipMessageBody containing
                            MIME indicating value "REGISTER from_UE_A",
                            MIME indicating value "r_200_Ok to_UE_A" containing Contact;;;
                    from the IMS_S_CSCF entity
                }
                then {
                    the IUT entity sends a r_200_Ok containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact indicating value PX_UE_A_SIP_URI;
                    to the IMS_S_CSCF entity
    
                }
                
            }
            
    	} // End of TP_ISC_SCCAS_RSC_REG_03
    } // end  Group "6.3.2 Triggers for the SCCAS providing information to ATCF"
     
    Group "6.3.3 SCCAS providing the PS to CS related  SRVCC information to the ATCF"{
    	
    	import all from Sip_Common;
    	
    	Test Purpose {
        
        TP Id TP_ISC_SCCAS_RSC_REG_04
        
        Test objective  "Verify that the SCCAS successfully sends MESSAGE providing PS to CS SRVCC information."
        
        Reference 
            "ETSI TS 124 237 [1], Clause 6.3.3"
        
        Config Id CFG_SCCAS_02
        
        PICS Selection NONE //PS2CSSRVCC
        
        Initial conditions with {
            the UE entity isNotRegisteredTo the IMS_A
        }
        
        Expected behaviour
            ensure that {
                when {
                    the IUT entity receives a REGISTER containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        FeatureCaps containing 
                            g3gppAtcfFeatureCapabilityIndicator indicating value "g.3gpp.atcf-mgmt-uri";,
                        SipMessageBody containing
                            MIME indicating value "REGISTER from_UE_A",
                            MIME indicating value "r_200_Ok to_UE_A" containing Contact;;;
                    from the IMS_S_CSCF entity
                }
                then {
                    the IUT entity sends a r_200_Ok containing
                        From indicating value PX_IMS_S_CSCF_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact indicating value PX_UE_A_SIP_URI //,
                        //Path indicating value PX_P_CSCF_A_SIP_URI,
                        //PChargingVector containing
                        //    icid indicating value PX_TO_BE_DEFINED,
                        //PVisitedNetworkID indicating value PX_TO_BE_DEFINED,
                        //Require indicating value "path",
                        //Supported indicating value "path"   ;;
                        ;
                    to the IMS_S_CSCF entity
                    
                	and the IUT entity sends a MESSAGE containing
                	 RUri indicating value "ATCFManagementUri",
                	 PAsertedIdentity,
                	 SipMessageBody containing
                            MIME indicating value "application/vnd.3gpp.SRVCC-info+xml";,
                	 PChargingVector indicating value "type 1 orig-ioi";
                	to the ATCF entity
                }
                
            }
            
    	} // End of TP_ISC_SCCAS_RSC_REG_04
    } //end  Group "6.3.3 SCCAS providing the PS to CS related  SRVCC information to the ATCF"
   
    
     Group "6.3.4 Triggers for the SCCAS providing information to MSC server"{
    	
    	import all from Sip_Common;
    	
    	Test Purpose {
        
        TP Id TP_ISC_SCCAS_RSC_REG_05
        
        Test objective  "Verify that the SCCAS successfully get CS to PS SRVCC information."
        
        Reference 
            "ETSI TS 124 237 [1], Clause 6.3.4"
        
        Config Id CFG_SCCAS_03
        
        PICS Selection NONE //CS2PSSRVCC
        
        Initial conditions with {
            the UE entity isNotRegisteredTo the IMS_A
        }
        
        Expected behaviour
            ensure that {
                when {
                    the IUT entity receives a REGISTER containing
                        From indicating value PX_UE_A_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact containing 
                           g3gppCs2psSsrvccTag,
                           g3gppPathTag
                        FeatureCaps;;    
                    from the IMS_S_CSCF entity
                }
                then {
                    the IUT entity sends a r_200_Ok containing
                        From indicating value PX_UE_A_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact indicating value PX_UE_A_SIP_URI
                        ;
                    to the IMS_S_CSCF entity 
                }               
            }
            
    	} // End of TP_ISC_SCCAS_RSC_REG_05
     } //end Group "6.3.4 Triggers for the SCCAS providing information to MSC server"
     
     Group "6.3.5 SCCAS providing the CS to PS SRVCC information to the MSC server"{
    	
    	import all from Sip_Common;
    	Test Purpose {
        
        TP Id TP_ISC_SCCAS_RSC_REG_06
        
        Test objective  "Verify that the SCCAS successfully provide CS to PS SRVCC information."
        
        Reference 
            "ETSI TS 124 237 [1], Clause 6.3.5"
        
        Config Id CFG_SCCAS_03
        
        PICS Selection NONE //CS2PSSRVCC
        
        Initial conditions with {
            the UE entity isNotRegisteredTo the IMS_A
        }
        
        Expected behaviour
            ensure that {
                when {
                    the IUT entity receives a REGISTER containing
                        From indicating value PX_UE_A_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact containing 
                           SipInstanceTag,
                           g3gppIcsiRefTag;;
                    from the IMS_S_CSCF entity
                }
                then {
                    the IUT entity sends a r_200_Ok containing
                        From indicating value PX_UE_A_SIP_URI,
                        To indicating value PX_UE_A_SIP_URI,
                        CallId indicating value PX_UE_A_CALLID,
                        Via indicating value PX_UE_A_VIA,
                        Contact indicating value PX_UE_A_SIP_URI,
                        AcceptContact containing
                           g3gppPathMediaFeatureTag
                        //Path indicating value PX_P_CSCF_A_SIP_URI,
                        PChargingVector indicating value "type 1 orig-ioi",
                        //PVisitedNetworkID indicating value PX_TO_BE_DEFINED,
                        PassertedIdentity indicating value PX_SCCAS_URI
                        //Supported indicating value "path"   ;;
                        SipMessageBody containing
                            MIME indicating value "application/vnd.3gpp.srvcc-ext+xml"    
                        ;;;
                    to the IMS_S_CSCF entity 
                }               
            }
            
    	} // End of TP_ISC_SCCAS_RSC_REG_06
     } //end Group "6.3.5 SCCAS providing the CS to PS SRVCC information to the MSC server"  
    
} // End of Package TP_SCCAS_Chapter_6_3

